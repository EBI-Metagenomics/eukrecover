process {
    withName: ALIGNMENT { cpus = 16; memory = '50.0 GB'}
    withName: ALIGNMENT_WITH_INDEXING { cpus = 16; memory = '50.0 GB'}
    withName: BAM_TO_FASTQ { cpus = 16; memory = '5.0 GB'}
    withName: BIN_REFINEMENT {
        cpus = 8;
        memory = '50 GB';
        conda = '/hps/software/users/rdf/metagenomics/service-team/software/miniconda_py39/envs/metawrap_v1.3'
    }
    withName: BUSCO { cpus = 4; memory = '30.0 GB'}
    withName: CAT { cpus = 8; memory = '20.0 GB'}
    withName: CHECKM2 {
        cpus = 8;
        memory = '30.0 GB';
        conda = '/hps/software/users/rdf/metagenomics/service-team/software/miniconda_py39/envs/checkm2'
    }
    withName: CHANGE_DOT_TO_UNDERSCORE { cpus = 8; memory = '2.0 GB'}
    withName: CHANGE_DOT_TO_UNDERSCORE_READS { cpus = 8; memory = '2.0 GB'}
    withName: CHANGE_UNDERSCORE_TO_DOT { cpus = 8; memory = '2.0 GB'}
    withName: CHANGE_ERR_TO_ERZ { cpus = 8; memory = '2.0 GB'}
    withName: COVERAGE_RECYCLER { cpus = 1; memory = '2.0 GB'}
    withName: DETECT_RRNA { cpus = 4; memory = '2.0 GB'}
    withName: DREP { cpus = 32; memory = '25.0 GB'}
    withName: DREP_MAGS { cpus = 32; memory = '25.0 GB'}
    withName: EUKCC { cpus = 16; memory = '20.0 GB'}
    withName: EUKCC_MAG { cpus = 16; memory = '20.0 GB'}
    withName: GTDBTK { cpus = 32; memory = '100.0 GB'}
    withName: GUNC { cpus = 4; memory = '20.0 GB'}
    withName: FASTP { cpus = 8; memory = '20.0 GB'}
    withName: LINKTABLE { cpus = 2; memory = '20.0 GB'}
    withName: MAG_CLEANUP_CAT { cpus = 2; memory = '20.0 GB'}
    withName: METAWRAP_BINNING { cpus = 8; memory = '50.0 GB'}
    withName: SELECT_CONT_SEQUENCES { cpus = 1; memory = '2.0 GB'}
}

singularity {
   enabled = true
   autoMounts = true
   cacheDir = params.singularity_cachedir
}

process {
    queue = 'production'
    withLabel: process_bigmem {
        queue = 'bigmem'
    }
}
conda.enabled = true